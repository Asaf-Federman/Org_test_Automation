resources:
  - name: S_Bash_0507_Image
    type: Image
    configuration:
      registry: s_artifactory
      sourceRepository: docker-local
      imageName: hello-world
      imageTag: latest

pipelines:
  - name: pipelines_S_Bash_0507
    steps:
     - name: S_Bash_0507
        type: Bash
        configuration:
          integrations:
            - name: s_artifactory
          inputResources:
            - name: S_Bash_0507_Image
        execution:
          onExecute:
            - docker pull hello-world
            - docker tag hello-world pipe-master.jfrog.info:8082/docker-local/hello:latest
            - jfrog rt dp pipe-master.jfrog.info:8082/docker-local/hello:latest docker-local --build-name=docker-hello --build-number=1 
            
      - name: S_Bash_0507
        type: Bash
        configuration:
          integrations:
            - name: s_artifactory
          inputResources:
            - name: S_Bash_0507_Image
        execution:
          onExecute:
            - docker pull hello-world
            - printenv
            
