resources:
  - name: S_WF_6379_003_PropertyBag_1
    type: PropertyBag
    configuration:
      property: test

  - name: S_WF_6379_003_PropertyBag_2
    type: PropertyBag
    configuration:
      property: test

pipelines:
  - name: pipeline_S_WF_6379_003
    steps:
      - name: S_WF_6379_003_1
        type: Bash
        execution:
          onExecute:
            - echo "Testing..."

      - name: S_WF_6379_003_2
        type: Bash
        configuration:
          inputSteps:
            - name: S_WF_6379_003_1
          outputResources:
            - name: S_WF_6379_003_PropertyBag_1
        execution:
          onExecute:
            - add_run_variables step="one"

      - name: S_WF_6379_003_3
        type: Bash
        configuration:
          priority: 500
          inputSteps:
            - name: S_WF_6379_003_1
          outputResources:
            - name: S_WF_6379_003_PropertyBag_2
        execution:
          onExecute:
            - add_run_variables step="two"

      - name: S_WF_6379_003_4
        type: Bash
        configuration:
          inputResources:
            - name: S_WF_6379_003_PropertyBag_1
            - name: S_WF_6379_003_PropertyBag_2
        execution:
          onExecute:
            - if [ "$step" != "two" ]; then exit 1; fi
